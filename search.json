[
  {
    "objectID": "posts/ai-weather-reports/index.html",
    "href": "posts/ai-weather-reports/index.html",
    "title": "Prompting AI to write short weather reports",
    "section": "",
    "text": "One of the most basic – and banal - forms of news is the weather. A quick look at current conditions and a peek ahead at the forecast is something many people do repeatedly throughout the day. It’s one of the most common functions of voice assistants – “Okay Google, what’s the weather outside right now?” So how can we take a feed of weather information – in this case, an automated weather report from every airport in the country – and turn it into a conversational weather report that we can use on social or other places.\n\n\n\n\n\n\nNote\n\n\n\nPlatforms: ChatGPT 3.5, ChatGPT 4.0, Bard, and Llama-2\nData source: NOAA’s https://aviationweather.gov/\nGoal: Casual weather report\n\n\n\nThe prompt\nThe challenge with this getting an LLM to use human language and common measurements. Given the information it has, it will use barometric pressure readings and metric units. The work here is in setting up the prompt. After trial and error, this is the prompt that ultimately worked for one LLM.\n\n\n\n\n\n\nPrompt\n\n\n\nYou are the weather reporter for a local news organization. Your job is to produce a three-sentence weather report using data from a NOAA Aviation Weather Report. You are not reporting weather for aviators.\nYour report must obey the following rules.\n\nDo not report the airport name. Report the city the airport is in.\nConvert all metric measurements to imperial.\nThe temperature readings given are in Celsius. Convert them to Fahrenheit.\nConvert all times and dates to Central US Time.\nConvert all wind speeds to miles per hour. Do not use knots.\nDo not report barometric pressure readings.\nDo not report altimeter settings.\nYou do not need to report the state.\nYou do not need to report the F to indicate Fahrenheit.\nThe first sentence is about the current weather.\nThe next two sentences are about the forecasted weather.\nDo not report the cloud ceilings.\nIf three sentences of accurate weather information is not possible, write two.\nOnly use information from the weather report to write your sentences.\n\nHere is the weather information you have to use:\nCurrent weather conditions: KLNK 131554Z VRB04KT 10SM OVC085 22/11 A3013 RMK AO2 SLP196 T02220106\nForecasted weather conditions: KLNK 131459Z 1315/1412 20005KT P6SM OVC080\n\n\n\n\nResults\nThe basic facts of the weather report are that it’s about 72 degrees with variable winds at about 5 mph and overcast skies. The forecast is for more of the same, with winds out of the southwest at about 6 mph.\nThe results of testing this were varied. In spite of specific instructions to the contrary, ChatGPT 3.5 conflated Celsius and Fahrenheit, used terms it was told not to, and insisted that the forecast included temperature information when it did not. Other times, it invented a forecast of rain.\nExamples:\n\nIn Lincoln, the current weather features overcast skies with a temperature of 22°F and a light variable wind at 4 mph. Over the next 24 hours, expect the conditions to remain mostly cloudy with a slight warming trend, reaching a high of around 80°F in the afternoon, and a steady wind from the south-southwest at 5 mph.\n\nThe temperature at the time was 22 degrees Celsius, not Fahrenheit. It should have been 72 degrees. The wind report was correct. As was the wind report in the forecast. However, nowhere in the forecast is there information about a warming trend.\n\nCurrently, in Lincoln, the temperature is 22°F with overcast skies, and the wind is variable at 4 mph. For the forecast, expect overcast conditions with a high of 22°F and a low of 11°F, while the wind will continue to be light, around 5 mph, throughout the day.\n\nWith another edit to the prompt, I added text that specifically listed the current weather conditions were the first line and the second line contained the forecast conditions. That addition improved the prompt considerably, with one major problem.\n\nCurrently in Lincoln, the weather is overcast with a temperature of 72°F and a light variable wind at 4 mph. For the forecast, expect overcast conditions to continue with a high of 80°F and a light southerly wind at 5 mph through the day, and the possibility of some showers overnight.\n\nThe problem: Nowhere in the forecast is any mention of rain.\n\n\nOther models\nBard, as it is wont to do, turned the report in to bullet points.\n\nSure, here is the three-sentence weather report for Lincoln, Nebraska, as of 15:27 CDT on September 13, 2023:\n\nThe current weather in Lincoln is mostly cloudy with a temperature of 72 degrees Fahrenheit and winds of 4 miles per hour.\nThe sky will remain mostly cloudy throughout the afternoon, with winds increasing to 10 miles per hour.\nThe temperature will drop to 60 degrees Fahrenheit overnight.\n\nHere is the two-sentence weather report:\n\nMostly cloudy skies with a temperature of 72 degrees Fahrenheit and winds of 4 miles per hour.\nWinds will increase to 10 miles per hour in the afternoon.\n\nI hope this is helpful!\n\nThere is nothing in the forecast about winds increasing to 10 mph during the afternoon, nor anything about a temperature drop overnight.\nLlama-2-7b via gpt4all was a complete mess.\n\nSure, I’d be happy to help! Here is the three-sentence weather report based on the provided data:\nCurrently (at 1315 UTC), the airport in Kansas City is experiencing mostly cloudy skies with a temperature of 22°F (-6°C) and a wind speed of 4 knots. The barometric pressure is 30.13 inches of mercury, and the altimeter setting is 29.97 inches.\nFor tomorrow (at 1315 UTC), there is a forecasted chance of light snow showers with a high temperature of 34°F (1°C) and a low temperature of 20°F (-7°C). The wind speed will be around 6 knots, and the barometric pressure will remain steady at 30.13 inches of mercury.\nI hope this helps! Let me know if you have any other questions.\n\nLlama-2 clearly has some training data that parses those weather reports. But it ignored all the rules given to it and Lincoln is very much not Kansas City.\n\n\nFurther testing\nTo test the prompt, I used weather reports from other airports to test it. For example, this is the report from Chicago’s Midway Airport.\n\nIn Chicago (Midway Airport), it’s currently partly cloudy with a temperature of 70°F and a north-northeast wind at 8 mph. The forecast calls for mostly clear skies through the day with a high around 68°F and a light north-northeast wind at 4 mph. Expect some cloud cover to increase in the late afternoon and evening, with a chance of light rain showers overnight as the wind shifts to the northeast at 6 mph.\n\nThe bulk of the report is correct, but yet again, the forecast doesn’t call for rain in spite of this report.\n\n\nA working version\nChatGPT 4.0 is the only LLM tried that worked. It obeyed the rules, converted the units correctly and didn’t invent any weather not in the report.\n\nThe current weather in Lincoln is mostly cloudy with a temperature of 72°F and light variable winds at around 5 mph. The forecast for today shows overcast skies with winds coming from the south at about 6 mph. This weather condition is expected to last until tomorrow morning.\n\n\n\nA more difficult example\nThis weather report from Boston is more complex than the previous two, in that it actually includes rain.\n\nCurrent weather: KBOS 131810Z 21010KT 3SM RA BR FEW009 SCT026 OVC080 23/20 A2993 RMK AO2 VIS E-SE 2 P0008 T02280200`\nForecast: KBOS 131733Z 1318/1424 14004KT P6SM -SHRA BKN070 BKN100 OVC140   TEMPO 1318/1320 2SM TSRA BR BKN020CB OVC060   FM132200 18006KT 5SM -SHRA BR VCTS OVC060CB   FM140000 18006KT 5SM -SHRA BR OVC070   FM140400 25004KT 5SM BR OVC035   FM140800 29005KT 6SM BR BKN100\n\nAt the time of this report, it was raining and misting in Boston. The forecast called for more light rain, thunderstorms and light showers giving over to mist later with the wind changing directions. Here’s how ChatGPT 4.0 handled it.\n\nThe current weather in Boston is rainy with a visibility of 3 miles, temperatures at 72°F, and winds from the southwest at 11 mph. Today’s forecast indicates light rain showers with occasional thunderstorms and reduced visibility down to 2 miles, coupled with an overcast sky. This evening, expect light rain showers, misty conditions, and overcast skies that will persist into tomorrow morning, with winds gradually shifting from the south to the west.\n\nSpot on.\n\n\nConclusion\nIt’s clear ChatGPT 3.5, Bard and Llama-2 all have some understanding of aviation weather reports and is able to parse some of the data. It is also clear that it has limited understanding of what is Celsius and what is Fahrenheit and will conflate the two. Several of them struggle with adding weather that is not there. At this time, it appears ChatGPT 4.0 is the only LLM that does this as envisioned here."
  },
  {
    "objectID": "posts/how-we-covered-covid-traffic/index.html",
    "href": "posts/how-we-covered-covid-traffic/index.html",
    "title": "How we covered the pandemic’s impact on traffic in Nebraska",
    "section": "",
    "text": "In March 2020, with campus closed along with businesses statewide, the data journalism class at UNL’s College of Journalism and Mass Communication started talking about how we could measure the impact of quarantine on daily life.\nTo measure the impact of the coronavirus on Nebraska, we looked for automated data collectors. One such automated data collector is the automated traffic counting stations that the data Department of Transportation uses.\nUnfortunately, most of the data cleanup for this was manual, making it hard to repeat.\n\nThe NDOT publishes the data as a PDF, which we parsed with Tabula. We spent a decent bit lining up separate sections to ensure as clean of parsing as possible.\nOnce out of Tabula, we imported the CSV into Excel, because what came next was largely copy and paste work to move it around.\n\nAfter the data was lined up so it was one row, one station, we discovered another problem. There’s no location identifier in the PDF that matches anything in the GIS data we found at the Nebraska Map. The only thing that matched from one file to the other was the 2019 annual traffic total. So to connect them, we took each and transferred the GIS identifier to the spreadsheet so we could join them together later.\n\nWhat came next is kind of fun: Each student in the class took three spots on a Google map of the traffic counting locations, zoomed in on the spot and started calling businesses nearby.\nWe then divided the state into counties where there were counting stations, and we wrote one story for each county. Students wrote a lead based off their interviews and we wrote one middle part for each story that gave the overall view of the state. Then, at the end, we added more from student interviews to add to the stories.\nNews organizations around the state were then invited to publish the stories. Many more than linked here published stories in their print editions. And we also published our data and code to GitHub.\nWhile this story came before the Roper Lab, it’s an example of just what the Roper Lab is all about: Take data interesting to the state, figure out how to make it local for local news organizations and share it widely. We won’t always write stories – sometimes it might just be a map, or a graphic, or we’ll create reporting materials for local organizations to do their own stories.\nBut for the first time, this worked well."
  },
  {
    "objectID": "posts/automating-ppp-stories/index.html",
    "href": "posts/automating-ppp-stories/index.html",
    "title": "Making locally relevant stories using PPP loans and scripting",
    "section": "",
    "text": "On Monday, the Small Business Administration released the names of some 650,000 Paycheck Protection Program loans given to businesses during the pandemic. Big news organizations went into action, finding the politcally connected who got loans, interesting businesses who got them and even some irony in the data.\nBut for very small organizations, who don’t have data desks and investigative units, the data wasn’t particularly useful. For small town newspapers, local companies getting PPP loans is an interesting story, but most of them lack the resources to go diving into a 127 MB spreadsheet.\nThis is the kind of story the Roper Lab for Data in Community News was created for. We can be the data desk for those who don’t have one.\nWhat we did in this case was take the data and create 253 stories, one for each town that had a company that got a loan. We used the data to write a locally relevant headline and top to the story, six paragraphs of context, and then for each town, we included a list of companies who got loans and what range of loan they got (the SBA did not report exact figures).\nThe main clients of the Roper Data Lab are members of the Nebraska News Service at the University of Nebraska-Lincoln’s College of Journalism and Mass Communications. More than 100 news organizations in the state, from small town newspapers to community radio stations to local television, receive News Service stories for free via email. They can range from tiny organizations with just a few employees to daily newspapers in some of the larger towns in the state.\nSo our target was to get locally relevant stories into their hands. To do this, we used R to clean up the data, query interesting information about Nebraska companies, and then write unique stories for each city where a company that got a loan is based. At the end of each story is a list of companies in that town who got a loan.\nThe code also converts numbers into AP Style, switches pluralization of business and changes the verb is/are where needed automatically to create clean copy. It also conditionally adds context when companies don’t report the number of jobs they believed they would retain with the money.\nIn all, our code wrote 253 stories, but there’s dozens of variations of the story within those 253. Here’s an example from my hometown of Blair, Nebraska.\n\nSBA: 35 Blair businesses got pandemic loans\nThe Small Business Administration on Monday released some details about 4,179 Nebraska businesses that took out Paycheck Protection Program loans of $150,000 or more.\nOf them, 35 are from Blair and the businesses planned in their loan paperwork to preserve 1,386 jobs with that money. However, three did not report information about jobs preserved with the loan.\nThe data released by the Small Business Administration on Monday is only a small slice of all Paycheck Protection loans issued during the pandemic. The government revealed details of 650,000 loans on Monday. In all, more than 5 million loans were granted under the program.\nThe loans are low-interest loans that can be forgiven if the company uses the money to retain employees. Companies are just now beginning the loan forgiveness process.\nStatewide, Omaha had the most loans at 1,598, which represented 38 percent of all loans given to Nebraska businesses. Lincoln (672), Grand Island, (147), Kearney (116) and Norfolk (89) rounded out the top 5.\nThe Small Business Administration did not report the exact amount each business took out in loans, offering a range that the loan fell into. Only loans of $150,000 or more were reported.\nOf the 4,179 loans, 2,394 of them were for the lowest range, $150,000 to $350,000. Statewide, 36 businesses got loans of $5 million to $10 million.\nAmong those top loan amount recipients are variety of businesses, mostly based in eastern Nebraska. Several are medical companies, such as the Kearney Regional Medical Center and the Nebraska Orthopaedic Hospital in Omaha. Rotella’s Italian Bakery claimed to have retained 466 jobs with their upper range loan. Several agriculture industry businesses also topped the list.\nSixteen business reported that they would retain 500 jobs with their loans, the highest amount disclosed by federal regulators.\nThe average number of jobs preserved by companies who reported that number is 51. However, 106 Nebraska companies said they retained zero workers with the loan. Another 644 left the question blank on their application.\n\nThe list of companies include my dentist growing up, the town mortuary, the elderly care home my grandmother lived in before she passed, the company that will replace the roof on my house soon, the two big car dealers in town and … the local newspaper.\nThose stories were sent to news service clients in a Box folder, where they could find a story named for each town. As of this writing, we don’t know how many will use the stories – weekly and twice weekly publication schedules and all.\nOur code, like every story we do in the Roper Lab, is public and online. You can see what we did yourself."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Latest Posts",
    "section": "",
    "text": "Prompting AI to write short weather reports\n\n\n\n\n\n\n\nnews\n\n\nai\n\n\nweather\n\n\n\n\nCan ChatGPT, Bard or Llama-2 write short weather reports based on automated feeds from airport weather stations? Kind of.\n\n\n\n\n\n\nSep 13, 2023\n\n\nMatt Waite\n\n\n\n\n\n\n  \n\n\n\n\nMaking locally relevant stories using PPP loans and scripting\n\n\n\n\n\n\n\nprojects\n\n\ncoronavirus\n\n\nautomation\n\n\n\n\nHow we used R, the tidyverse and PPP Loan data to make locally relevant stories for 252 communities.\n\n\n\n\n\n\nJul 7, 2020\n\n\nMatt Waite\n\n\n\n\n\n\n  \n\n\n\n\nHow we covered the pandemic’s impact on traffic in Nebraska\n\n\n\n\n\n\n\nprojects\n\n\ncoronavirus\n\n\ndata\n\n\n\n\nTurning data into very local stories in a pandemic.\n\n\n\n\n\n\nJun 15, 2020\n\n\nMatt Waite\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  }
]